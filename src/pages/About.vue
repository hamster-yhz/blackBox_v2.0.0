<template>
  <div class="about">
    <div class="about-content">
      <h1>关于黑盒</h1>
      <p>黑盒是一个专注于技术分享和学习的个人博客平台。在这里，我们将探索各种技术领域的知识，分享开发经验和心得。</p>
      
      <div class="blogger-intro">
        <h3>博主介绍</h3>
        <p>作为一名在校学生和技术爱好者，我热衷于探索编程世界的无限可能。通过这个博客平台，我不仅记录自己的学习历程，也希望能与更多志同道合的朋友交流技术心得。在Java后端开发的道路上，我不断学习新技术，尝试解决实际问题，期待能在这个领域有所建树。欢迎大家一起交流学习，共同进步！</p>
      </div>

      <div class="contact-info">
        <h3>博主联系方式</h3>
        <a href="mailto:email@655353.xyz" class="email-link">
          <svg xmlns="http://www.w3.org/2000/svg" class="email-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
          <span>email@655353.xyz</span>
        </a>
        <p class="contact-desc">欢迎通过邮件与我交流技术问题或合作事宜</p>
        
        <a href="https://github.com/hamster-yhz/" target="_blank" rel="noopener noreferrer" class="github-link">
          <svg xmlns="http://www.w3.org/2000/svg" class="github-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
          </svg>
          <span>GitHub 主页</span>
        </a>
        <p class="contact-desc">欢迎访问我的 GitHub 主页，一起交流技术，分享经验</p>
      </div>

      <h2>技术栈</h2>
      <div class="tech-stack">
        <div class="tech-category">
          <h3>后端开发</h3>
          <div class="tech-items">
            <div class="tech-item">
              <svg xmlns="http://www.w3.org/2000/svg" class="tech-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
              </svg>
              <span>Java</span>
            </div>
            <div class="tech-item">
              <svg xmlns="http://www.w3.org/2000/svg" class="tech-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
              </svg>
              <span>Spring Boot</span>
            </div>
            <div class="tech-item">
              <svg xmlns="http://www.w3.org/2000/svg" class="tech-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 12V8H6a2 2 0 0 0-2 2v4"></path>
                <path d="M4 6v12a2 2 0 0 0 2 2h14v-4"></path>
                <path d="M18 12a2 2 0 0 0-2 2v4h4v-4a2 2 0 0 0-2-2z"></path>
              </svg>
              <span>MySQL</span>
            </div>
            <div class="tech-item">
              <svg xmlns="http://www.w3.org/2000/svg" class="tech-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 8v8"></path>
                <path d="M8 12h8"></path>
              </svg>
              <span>Redis</span>
            </div>
            <div class="tech-item">
              <svg xmlns="http://www.w3.org/2000/svg" class="tech-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg>
              <span>RabbitMQ</span>
            </div>
          </div>
        </div>
      </div>

      <h2 @click="toggleContent" class="clickable-title">产品说明</h2>
      <div v-if="!showNotifications" class="build-info">
        <h2>构建方式</h2>
        <div class="tech-grid">
          <div class="tech-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="tech-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
            </svg>
            <span>Vue 3</span>
          </div>
          <div class="tech-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="tech-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
            </svg>
            <span>Vite</span>
          </div>
          <div class="tech-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="tech-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path>
              <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"></path>
            </svg>
            <span>CSS Variables</span>
          </div>
        </div>
      </div>

      <div v-if="!showNotifications" class="markdown-support">
        <h2>Markdown 支持</h2>
        <div class="markdown-features">
          <div class="feature-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M16 18l6-6-6-6"></path>
              <path d="M8 6l-6 6 6 6"></path>
            </svg>
            <span>代码高亮</span>
          </div>
          <div class="feature-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
            </svg>
            <span>数学公式</span>
          </div>
          <div class="feature-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="3" y1="9" x2="21" y2="9"></line>
              <line x1="9" y1="21" x2="9" y2="9"></line>
            </svg>
            <span>表格支持</span>
          </div>
        </div>
      </div>

      <div v-if="showNotifications" class="notifications-container">
        <div class="notifications-header">
          <h3>{{ currentLanguage === 'zh' ? '最新公告' : 'Announcements' }}</h3>
          <button class="lang-switch" @click="toggleLanguage">
            {{ currentLanguage === 'zh' ? 'EN' : '中' }}
          </button>
        </div>
        <div class="notification-list">
          <div v-for="(announcement, index) in sortedAnnouncements" :key="index" 
               class="notification-item" :class="{ 'pinned': announcement.isPinned, 'version': announcement.icon === 'version' }">
            <div class="notification-icon" :class="[announcement.icon, { 'pinned': announcement.isPinned }]">
              <!-- 版本更新 -->
              <span v-if="announcement.icon === 'version'">🔄</span>
              <!-- 警告/重要通知 -->
              <span v-else-if="announcement.icon === 'warning'">⚠️</span>
              <!-- 新功能 -->
              <span v-else-if="announcement.icon === 'feature'">✨</span>
              <!-- 维护通知 -->
              <span v-else-if="announcement.icon === 'maintenance'">🔧</span>
              <!-- 活动通知 -->
              <span v-else-if="announcement.icon === 'event'">🎉</span>
              <!-- 问题修复 -->
              <span v-else-if="announcement.icon === 'bugfix'">🐛</span>
              <!-- 安全更新 -->
              <span v-else-if="announcement.icon === 'security'">🔒</span>
              <!-- 性能优化 -->
              <span v-else-if="announcement.icon === 'performance'">⚡</span>
              <!-- 文档更新 -->
              <span v-else-if="announcement.icon === 'docs'">📚</span>
              <!-- 默认圆点 -->
              <span v-else>•</span>
            </div>
            <div class="notification-content">
              {{ currentLanguage === 'zh' ? announcement.zh : announcement.en }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="github-link-container">
      <a href="https://github.com/hamster-yhz/blackBox_v2.0.0/" target="_blank" rel="noopener noreferrer" class="github-link">
        <svg xmlns="http://www.w3.org/2000/svg" class="github-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
        </svg>
        <span>GitHub</span>
      </a>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { useTheme } from '../composables/useTheme'
import { ANNOUNCEMENTS } from '../config/announcement'

const { isDark } = useTheme()
const showNotifications = ref(false)
const currentLanguage = ref('zh')

const toggleContent = () => {
  showNotifications.value = !showNotifications.value
}

const toggleLanguage = () => {
  currentLanguage.value = currentLanguage.value === 'zh' ? 'en' : 'zh'
}

// 对公告进行排序，固定公告始终在最上方
const sortedAnnouncements = computed(() => {
  return [...ANNOUNCEMENTS].sort((a, b) => {
    if (a.isPinned && !b.isPinned) return -1
    if (!a.isPinned && b.isPinned) return 1
    return 0
  })
})
</script>

<style scoped>
.about {
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem;
}

.about-content {
  background: var(--bg-secondary);
  padding: 2rem;
  border-radius: 12px;
}

.contact-info {
  margin: 2rem 0;
  padding: 1.5rem;
  background: var(--bg-primary);
  border-radius: 8px;
  border: 1px solid var(--border-color);
}

.contact-info h3 {
  color: var(--text-primary);
  margin-bottom: 1rem;
  font-size: 1.2rem;
}

.contact-desc {
  margin-top: 0.5rem;
  font-size: 0.9rem;
  color: var(--text-secondary);
}

.email-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--text-primary);
  text-decoration: none;
  font-size: 1.1rem;
  transition: color 0.2s ease;
}

.email-link:hover {
  color: var(--primary-color);
}

.email-icon {
  width: 24px;
  height: 24px;
}

h1 {
  color: var(--text-primary);
  margin-bottom: 1.5rem;
  font-size: 2rem;
}

h2 {
  color: var(--text-primary);
  margin: 2rem 0 1rem;
  font-size: 1.5rem;
}

p {
  color: var(--text-secondary);
  line-height: 1.6;
  margin-bottom: 1.5rem;
}

ul {
  list-style: none;
  padding: 0;
}

li {
  color: var(--text-secondary);
  padding: 0.5rem 0;
  padding-left: 1.5rem;
  position: relative;
}

li::before {
  content: "•";
  color: var(--primary-color);
  position: absolute;
  left: 0;
}

.build-info, .markdown-support {
  margin: 0.75rem 0;
  padding: 0.5rem;
  background: var(--bg-primary);
  border-radius: 6px;
  border: 1px solid var(--border-color);
}

.build-info h2, .markdown-support h2 {
  margin: 0 0 0.25rem 0;
  font-size: 1rem;
}

.tech-grid, .markdown-features {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
  gap: 0.5rem;
  margin-top: 0.25rem;
}

.tech-item, .feature-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  padding: 0.4rem;
  background: var(--bg-secondary);
  border-radius: 4px;
  transition: transform 0.2s ease;
}

.tech-item:hover, .feature-item:hover {
  transform: translateY(-2px);
}

.tech-icon, .feature-icon {
  width: 16px;
  height: 16px;
  color: var(--primary-color);
}

.tech-item span, .feature-item span {
  color: var(--text-primary);
  font-size: 0.8rem;
  text-align: center;
}

.tech-stack {
  margin: 1rem 0;
}

.tech-category {
  margin-bottom: 1rem;
}

.tech-category h3 {
  color: var(--text-primary);
  font-size: 1.1rem;
  margin-bottom: 0.5rem;
  padding-left: 0.5rem;
  border-left: 3px solid var(--primary-color);
}

.tech-items {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.75rem;
}

.tech-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  background: var(--bg-primary);
  border-radius: 6px;
  border: 1px solid var(--border-color);
  transition: transform 0.2s ease;
}

.tech-item:hover {
  transform: translateY(-2px);
}

.tech-icon {
  width: 20px;
  height: 20px;
  color: var(--primary-color);
}

.tech-item span {
  color: var(--text-primary);
  font-size: 0.9rem;
}

.blogger-intro {
  margin: 1.5rem 0;
  padding: 1rem;
  background: var(--bg-primary);
  border-radius: 8px;
  border: 1px solid var(--border-color);
}

.blogger-intro h3 {
  color: var(--text-primary);
  margin-bottom: 0.75rem;
  font-size: 1.1rem;
}

.blogger-intro p {
  color: var(--text-secondary);
  line-height: 1.6;
  font-size: 0.95rem;
  margin: 0;
}

@media (max-width: 768px) {
  .about {
    padding: 1rem;
  }
  
  .about-content {
    padding: 1.5rem;
  }
  
  h1 {
    font-size: 1.75rem;
  }
  
  h2 {
    font-size: 1.25rem;
  }
  
  .tech-items {
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: 0.5rem;
  }
  
  .tech-item {
    padding: 0.4rem;
  }
  
  .tech-icon {
    width: 16px;
    height: 16px;
  }
  
  .tech-item span {
    font-size: 0.8rem;
  }
  
  .tech-grid, .markdown-features {
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: 0.4rem;
  }
  
  .tech-item, .feature-item {
    padding: 0.3rem;
  }
  
  .tech-icon, .feature-icon {
    width: 14px;
    height: 14px;
  }
  
  .tech-item span, .feature-item span {
    font-size: 0.75rem;
  }
  
  .blogger-intro {
    margin: 1rem 0;
    padding: 0.75rem;
  }
  
  .blogger-intro h3 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }
  
  .blogger-intro p {
    font-size: 0.9rem;
  }
}

.github-link-container {
  margin-top: 2rem;
  text-align: center;
}

.github-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--text-primary);
  text-decoration: none;
  font-size: 0.9rem;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  transition: all 0.2s ease;
}

.github-link:hover {
  color: var(--primary-color);
  transform: translateY(-1px);
}

.github-icon {
  width: 16px;
  height: 16px;
}

@media (max-width: 768px) {
  .github-link-container {
    margin-top: 1.5rem;
  }
  
  .github-link {
    font-size: 0.85rem;
    padding: 0.4rem 0.8rem;
  }
  
  .github-icon {
    width: 14px;
    height: 14px;
  }
}

.clickable-title {
  cursor: pointer;
  user-select: none;
  display: inline-flex;
  align-items: center;
  transition: color 0.2s ease;
}

.clickable-title:hover {
  color: var(--primary-color);
}

.notifications-container {
  background: var(--bg-primary);
  border-radius: 6px;
  border: 1px solid var(--border-color);
  margin: 0.75rem 0;
  overflow: hidden;
  height: 200px;
}

.notifications-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
  position: sticky;
  top: 0;
  z-index: 1;
}

.notifications-header h3 {
  margin: 0;
  font-size: 0.9rem;
  color: var(--text-primary);
}

.lang-switch {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 4px 12px;
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  color: var(--text-primary);
  transition: all 0.2s ease;
}

.lang-switch:hover {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

.notification-list {
  height: calc(100% - 2.5rem);
  overflow-y: auto;
  padding: 0.5rem;
}

.notification-item {
  display: flex;
  gap: 0.4rem;
  padding: 0.4rem;
  border-bottom: 1px solid var(--border-color);
  transition: all 0.2s ease;
}

.notification-item:last-child {
  border-bottom: none;
}

.notification-item.pinned:not(.version) {
  background-color: var(--bg-warning);
  margin: 0 -0.4rem;
  padding: 0.4rem;
  border-radius: 4px;
}

.notification-icon {
  width: 14px;
  height: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-size: 10px;
}

/* 版本更新 - 蓝色 */
.notification-icon.version {
  color: var(--primary);
}

/* 警告/重要通知 - 红色 */
.notification-icon.warning {
  color: var(--text-warning);
}

/* 新功能 - 蓝色 */
.notification-icon.feature {
  color: var(--primary);
}

/* 维护通知 - 灰色 */
.notification-icon.maintenance {
  color: var(--text-secondary);
}

/* 活动通知 - 黄色 */
.notification-icon.event {
  color: #FFD700;
}

/* 问题修复 - 绿色 */
.notification-icon.bugfix {
  color: #4CAF50;
}

/* 安全更新 - 紫色 */
.notification-icon.security {
  color: #9C27B0;
}

/* 性能优化 - 橙色 */
.notification-icon.performance {
  color: #FF9800;
}

/* 文档更新 - 蓝色 */
.notification-icon.docs {
  color: var(--primary);
}

/* 置顶状态下的图标颜色 */
.notification-icon.pinned:not(.version) {
  color: var(--text-warning);
}

.notification-content {
  color: var(--text-primary);
  font-size: 0.85rem;
  line-height: 1.4;
  white-space: pre-line;
}

.pinned:not(.version) .notification-content {
  color: var(--text-warning);
  font-weight: 500;
}

@media (max-width: 768px) {
  .notifications-container {
    height: 180px;
    margin: 0.5rem 0;
  }

  .notifications-header {
    padding: 0.4rem;
  }

  .notifications-header h3 {
    font-size: 0.85rem;
  }

  .notification-list {
    height: calc(100% - 2.2rem);
    padding: 0.4rem;
  }

  .notification-item {
    padding: 0.35rem;
    gap: 0.35rem;
  }

  .notification-icon {
    width: 12px;
    height: 12px;
    font-size: 9px;
  }

  .notification-content {
    font-size: 0.8rem;
  }
}
</style> 